{"ast":null,"code":"import _slicedToArray from \"/Users/malcolmlaing/dev/favorite-books/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/malcolmlaing/dev/favorite-books/packages/client/src/App.js\";\nimport React from \"react\";\nimport Item from \"./components/item\";\nimport \"./App.css\";\n\nfunction App() {\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        authors = _React$useState2[0],\n        setAuthors = _React$useState2[1];\n\n  const _React$useState3 = React.useState(\"\"),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        value = _React$useState4[0],\n        setValue = _React$useState4[1];\n\n  React.useEffect(() => {\n    fetch(\"http://localhost:3001/authors\").then(res => res.json()).then(result => {\n      setAuthors(result);\n    });\n  }, []);\n\n  const handleEdit = (id, newValue) => {\n    const data = {\n      name: newValue\n    };\n    return new Promise((resolve, reject) => {\n      fetch(\"http://localhost:3001/authors/\".concat(id), {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      }).then(res => res.json()).then(result => {\n        setAuthors(authors.map(author => {\n          if (author.id !== id) return author;\n          return result;\n        }));\n        resolve();\n      });\n    });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (value && value !== \"\") {\n      const data = {\n        name: value\n      };\n      fetch(\"http://localhost:3001/authors\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      }).then(res => res.json()).then(result => {\n        console.log(result);\n        setAuthors(authors.concat([result]));\n      });\n    }\n  };\n\n  const handleDelete = id => {\n    fetch(\"http://localhost:3001/authors/\".concat(id), {\n      method: \"DELETE\"\n    }).then(res => res.json()).then(result => {\n      setAuthors(authors.filter(author => author.id !== id));\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, authors.map(book => React.createElement(Item, {\n    key: book.id,\n    value: book.name,\n    handleEdit: newValue => handleEdit(book.id, newValue),\n    handleDelete: () => handleDelete(book.id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }))), React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    value: value,\n    onChange: event => setValue(event.target.value),\n    placeholder: \"eg. The Great Gatsby\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Submit\")));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/malcolmlaing/dev/favorite-books/packages/client/src/App.js"],"names":["React","Item","App","useState","authors","setAuthors","value","setValue","useEffect","fetch","then","res","json","result","handleEdit","id","newValue","data","name","Promise","resolve","reject","method","headers","body","JSON","stringify","map","author","handleSubmit","event","preventDefault","console","log","concat","handleDelete","filter","book","target"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Item from \"./components/item\";\n\nimport \"./App.css\";\n\nfunction App() {\n  const [authors, setAuthors] = React.useState([]);\n  const [value, setValue] = React.useState(\"\");\n\n  React.useEffect(() => {\n    fetch(\"http://localhost:3001/authors\")\n      .then(res => res.json())\n      .then(result => {\n        setAuthors(result);\n      });\n  }, []);\n\n  const handleEdit = (id, newValue) => {\n    const data = {\n      name: newValue\n    };\n\n    return new Promise((resolve, reject) => {\n      fetch(`http://localhost:3001/authors/${id}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      })\n        .then(res => res.json())\n        .then(result => {\n          setAuthors(\n            authors.map(author => {\n              if (author.id !== id) return author;\n              return result;\n            })\n          );\n          resolve();\n        });\n    });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (value && value !== \"\") {\n      const data = {\n        name: value\n      };\n      fetch(\"http://localhost:3001/authors\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      })\n        .then(res => res.json())\n        .then(result => {\n          console.log(result);\n          setAuthors(authors.concat([result]));\n        });\n    }\n  };\n\n  const handleDelete = id => {\n    fetch(`http://localhost:3001/authors/${id}`, {\n      method: \"DELETE\"\n    })\n      .then(res => res.json())\n      .then(result => {\n        setAuthors(authors.filter(author => author.id !== id));\n      });\n  };\n\n  return (\n    <div className=\"App\">\n      <ul>\n        {authors.map(book => (\n          <Item\n            key={book.id}\n            value={book.name}\n            handleEdit={newValue => handleEdit(book.id, newValue)}\n            handleDelete={() => handleDelete(book.id)}\n          />\n        ))}\n      </ul>\n\n      <form onSubmit={handleSubmit}>\n        <input\n          value={value}\n          onChange={event => setValue(event.target.value)}\n          placeholder=\"eg. The Great Gatsby\"\n        />\n        <button type=\"submit\">Submit</button>\n      </form>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}