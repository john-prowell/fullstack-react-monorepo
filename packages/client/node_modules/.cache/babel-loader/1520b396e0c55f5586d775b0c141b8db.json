{"ast":null,"code":"import _slicedToArray from \"/Users/malcolmlaing/dev/favorite-books/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/malcolmlaing/dev/favorite-books/packages/client/src/App.js\";\nimport React from \"react\";\nimport Item from \"./components/item\";\nimport \"./App.css\";\n\nfunction App() {\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        books = _React$useState2[0],\n        setBooks = _React$useState2[1];\n\n  const _React$useState3 = React.useState(\"\"),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        value = _React$useState4[0],\n        setValue = _React$useState4[1];\n\n  React.useEffect(() => {\n    fetch(\"http://localhost:3001/books\").then(res => res.json()).then(result => {\n      setBooks(result);\n    });\n  }, []);\n\n  const handleEdit = (id, newValue) => {\n    const data = {\n      name: newValue\n    };\n    fetch(\"http://localhost:3001/books/\".concat(id), {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    }).then(res => res.json()).then(result => {\n      setBooks(books.map(book => {\n        if (book.id !== id) return book;\n        return result;\n      }));\n    });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (value && value !== \"\") {\n      const data = {\n        name: value\n      };\n      fetch(\"http://localhost:3001/books\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      }).then(res => res.json()).then(result => {\n        setBooks(books.concat([result]));\n        setValue(\"\");\n      });\n    }\n  };\n\n  const handleDelete = id => {\n    fetch(\"http://localhost:3001/books/\".concat(id), {\n      method: \"DELETE\"\n    }).then(res => res.json()).then(result => {\n      setBooks(books.filter(book => book.id !== id));\n    });\n  };\n\n  return React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Favorite Books\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"Keep track of your favorites!\"), React.createElement(\"ul\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, books.map(book => React.createElement(Item, {\n    key: book.id,\n    value: book.name,\n    handleEdit: newValue => handleEdit(book.id, newValue),\n    handleDelete: () => handleDelete(book.id),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }))), React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"new-form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    className: \"new-input\",\n    value: value,\n    onChange: event => setValue(event.target.value),\n    placeholder: \"eg. The Great Gatsby\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    className: \"button primary-button\",\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, \"Submit\")));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/malcolmlaing/dev/favorite-books/packages/client/src/App.js"],"names":["React","Item","App","useState","books","setBooks","value","setValue","useEffect","fetch","then","res","json","result","handleEdit","id","newValue","data","name","method","headers","body","JSON","stringify","map","book","handleSubmit","event","preventDefault","concat","handleDelete","filter","target"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Item from \"./components/item\";\n\nimport \"./App.css\";\n\nfunction App() {\n  const [books, setBooks] = React.useState([]);\n  const [value, setValue] = React.useState(\"\");\n\n  React.useEffect(() => {\n    fetch(\"http://localhost:3001/books\")\n      .then(res => res.json())\n      .then(result => {\n        setBooks(result);\n      });\n  }, []);\n\n  const handleEdit = (id, newValue) => {\n    const data = {\n      name: newValue\n    };\n\n    fetch(`http://localhost:3001/books/${id}`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    })\n      .then(res => res.json())\n      .then(result => {\n        setBooks(\n          books.map(book => {\n            if (book.id !== id) return book;\n            return result;\n          })\n        );\n      });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (value && value !== \"\") {\n      const data = {\n        name: value\n      };\n      fetch(\"http://localhost:3001/books\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      })\n        .then(res => res.json())\n        .then(result => {\n          setBooks(books.concat([result]));\n          setValue(\"\");\n        });\n    }\n  };\n\n  const handleDelete = id => {\n    fetch(`http://localhost:3001/books/${id}`, {\n      method: \"DELETE\"\n    })\n      .then(res => res.json())\n      .then(result => {\n        setBooks(books.filter(book => book.id !== id));\n      });\n  };\n\n  return (\n    <div className=\"App\">\n      <h1>Favorite Books</h1>\n      <p>Keep track of your favorites!</p>\n      <ul>\n        {books.map(book => (\n          <Item\n            key={book.id}\n            value={book.name}\n            handleEdit={newValue => handleEdit(book.id, newValue)}\n            handleDelete={() => handleDelete(book.id)}\n          />\n        ))}\n      </ul>\n\n      <form onSubmit={handleSubmit} className=\"new-form\">\n        <input\n          className=\"new-input\"\n          value={value}\n          onChange={event => setValue(event.target.value)}\n          placeholder=\"eg. The Great Gatsby\"\n        />\n        <button className=\"button primary-button\" type=\"submit\">\n          Submit\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}